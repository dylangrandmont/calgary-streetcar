var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function r(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(t,e){t.appendChild(e)}function a(t,e,n){t.insertBefore(e,n||null)}function c(t){t.parentNode.removeChild(t)}function l(t){return document.createElement(t)}function S(t){return document.createTextNode(t)}function u(){return S(" ")}function d(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function f(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function p(t){return""===t?null:+t}function m(t,e){t.value=null==e?"":e}let v;function g(t){v=t}function h(t){(function(){if(!v)throw new Error("Function called outside component initialization");return v})().$$.on_mount.push(t)}const $=[],A=[],W=[],y=[],N=Promise.resolve();let b=!1;function w(t){W.push(t)}function k(t){y.push(t)}let x=!1;const E=new Set;function C(){if(!x){x=!0;do{for(let t=0;t<$.length;t+=1){const e=$[t];g(e),L(e.$$)}for(g(null),$.length=0;A.length;)A.pop()();for(let t=0;t<W.length;t+=1){const e=W[t];E.has(e)||(E.add(e),e())}W.length=0}while($.length);for(;y.length;)y.pop()();b=!1,x=!1,E.clear()}}function L(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(w)}}const T=new Set;let _;function R(){_={r:0,c:[],p:_}}function I(){_.r||o(_.c),_=_.p}function K(t,e){t&&t.i&&(T.delete(t),t.i(e))}function M(t,e,n,o){if(t&&t.o){if(T.has(t))return;T.add(t),_.c.push((()=>{T.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function q(t,e,n){const o=t.$$.props[e];void 0!==o&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}function P(t){t&&t.c()}function z(t,n,i,s){const{fragment:a,on_mount:c,on_destroy:l,after_update:S}=t.$$;a&&a.m(n,i),s||w((()=>{const n=c.map(e).filter(r);l?l.push(...n):o(n),t.$$.on_mount=[]})),S.forEach(w)}function j(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function B(t,e){-1===t.$$.dirty[0]&&($.push(t),b||(b=!0,N.then(C)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function F(e,r,i,s,a,l,S,u=[-1]){const d=v;g(e);const f=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:a,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(r.context||(d?d.$$.context:[])),callbacks:n(),dirty:u,skip_bound:!1,root:r.target||d.$$.root};S&&S(f.root);let p=!1;if(f.ctx=i?i(e,r.props||{},((t,n,...o)=>{const r=o.length?o[0]:n;return f.ctx&&a(f.ctx[t],f.ctx[t]=r)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](r),p&&B(e,t)),n})):[],f.update(),p=!0,o(f.before_update),f.fragment=!!s&&s(f.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);f.fragment&&f.fragment.l(t),t.forEach(c)}else f.fragment&&f.fragment.c();r.intro&&K(e.$$.fragment),z(e,r.target,r.anchor,r.customElement),C()}g(d)}class H{$destroy(){j(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function O(e){let n,r,i,p,v,g,h,$,A,W,y,N,b;return{c(){n=l("div"),r=l("b"),r.textContent="Controls",i=u(),p=l("p"),v=l("div"),g=S("Adjust Speed\n            "),h=l("input"),$=S("\n            Car Icon Size\n            "),A=l("input"),W=S("\n            Legend\n            "),y=l("input"),f(h,"type","range"),f(h,"min","0"),f(h,"max","0.000005"),f(h,"step","0.0000001"),f(A,"type","range"),f(A,"min","10"),f(A,"max","100"),f(y,"type","checkbox"),f(v,"class","grid svelte-1v00eo1"),f(n,"class","panel-container root svelte-1v00eo1")},m(t,o){a(t,n,o),s(n,r),s(n,i),s(n,p),s(n,v),s(v,g),s(v,h),m(h,e[0]),s(v,$),s(v,A),m(A,e[2]),s(v,W),s(v,y),y.checked=e[1],N||(b=[d(h,"change",e[3]),d(h,"input",e[3]),d(A,"change",e[4]),d(A,"input",e[4]),d(y,"change",e[5])],N=!0)},p(t,[e]){1&e&&m(h,t[0]),4&e&&m(A,t[2]),2&e&&(y.checked=t[1])},i:t,o:t,d(t){t&&c(n),N=!1,o(b)}}}function D(t,e,n){let{speed:o}=e,{showLegend:r}=e,i=50;return t.$$set=t=>{"speed"in t&&n(0,o=t.speed),"showLegend"in t&&n(1,r=t.showLegend)},t.$$.update=()=>{4&t.$$.dirty&&document.documentElement.style.setProperty("--car-icon-size",`${i}px`)},[o,r,i,function(){o=p(this.value),n(0,o)},function(){i=p(this.value),n(2,i)},function(){r=this.checked,n(1,r)}]}class Z extends H{constructor(t){super(),F(this,t,D,O,i,{speed:0,showLegend:1})}}const J={"20 Av N":{"7 St NW":[-114.07893964039631,51.07054169892371],"Center St":[-114.06257393380261,51.070609731750714]},"16 Av N":{"10 St NW":[-114.08489350460921,51.066904001348],"Edmonton Trail":[-114.05618395994925,51.06693626186497]},"8 Av N":{"14 St NW":[-114.09475415944235,51.0574984522886]},"7 Av N":{"24 St NW":[-114.11806377866809,51.05914040581638]},"5 Av N":{"14 St NW":[-114.094731781486,51.05709687083791],"10 St NW":[-114.08599386788937,51.05712357695188]},"Kensington Rd":{"10 St NW":[-114.08592990014981,51.05253712700806],"14 St NW":[-114.0947245349653,51.052520631762604],"24 St NW":[-114.11796612252739,51.052485028711544]},"Memorial Dr":{"10 St NW":[-114.08569923100222,51.0518089710593]},"4 Av S":{"9 St SW":[-114.08352065905363,51.049901659316184],"4 St SW":[-114.07157412631952,51.049578034093955]},"8 Av S":{"9 St SW":[-114.0837042074354,51.0461550109985],"8 St SW":[-114.0812599513191,51.04605708217247],"4 St SW":[-114.07148474434986,51.045764491004334],"1 St SW":[-114.06548890682399,51.04560095291732],"Center St":[-114.06298135443159,51.045518122829684],"2 St SE":[-114.0581207853938,51.045354064328095],"4 St SE":[-114.05320870960337,51.04526820411377],"6 St SE":[-114.04834008539397,51.04513188716467]},"9 Av S":{"6 St E":[-114.0483529394385,51.04411080434035]},"12 Av S":{"18 St SW":[-114.1042183736658,51.0425847226566],"14 St SW":[-114.09467317597523,51.042302050146354],"8 St SW":[-114.08154153696147,51.04194719189309],"1 St SW":[-114.06580161010373,51.041488891337764],"2 St SE":[-114.05843117123706,51.041277794230425]},"17 Av S":{"29 St SW":[-114.1237226937469,51.033190262669265],"26 St SW":[-114.12371714702843,51.03784613000478],"14 St SW":[-114.09472267063069,51.03781458725867],"2 St SE":[-114.05865238987491,51.03783086571737],"1 St SW":[-114.06605539761398,51.03781793732603]},"23 Av S":{"29 St SW":[-114.12956914789937,51.033161877914324],"26 St SW":[-114.12959468827377,51.03780459079984]},"26 Av S":{"14 St SW":[-114.09474547223127,51.0304330356334],"20 St SW":[-114.10944297855941,51.030420176040515]},"34 Av S":{"20 St SW":[-114.10930326307387,51.02316898218637],"14 St SW":[-114.09472699485453,51.0232217172826]}};function Y(t){return{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:t}}}const G=Y([J["Kensington Rd"]["10 St NW"],J["Kensington Rd"]["14 St NW"],J["5 Av N"]["14 St NW"],J["5 Av N"]["10 St NW"],J["Kensington Rd"]["10 St NW"],J["Memorial Dr"]["10 St NW"],J["4 Av S"]["9 St SW"],J["8 Av S"]["9 St SW"],J["8 Av S"]["6 St SE"],J["9 Av S"]["6 St E"],[-114.04317766836698,51.04372702045797],[-114.0372805028625,51.0422846914819],[-114.03682431075224,51.04219493204588],[-114.01802378219071,51.03451108917668],[-114.01917322421849,51.03349617324513],[-114.01918637603683,51.02713982395138]]),Q=Y([[-114.07438791506914,51.059249914924834],[-114.07439302541748,51.058954415693634],[-114.07397908720161,51.05894718878665],[-114.0738134921497,51.059023623559156],[-114.07378617155163,51.059099756583784],[-114.07391265267314,51.05922502239929],[-114.07395225787279,51.0592523238782],[-114.07598880340164,51.05926055903463],[-114.07619997133722,51.059205465868125],[-114.08450858528214,51.05419424511214],[-114.08593936152991,51.054067658980074],[-114.08593093455498,51.05254113041264],[-114.08577077297342,51.051922371373465],[-114.08369765853143,51.05011674810018],[-114.07157412631952,51.049578034093955],[-114.07148474434986,51.045764491004334],[-114.05813966180291,51.04537576453928],[-114.05844021989171,51.04127328181791],[-114.04684772767578,51.04094865694908],[-114.04503824021275,51.04147175374527],[-114.04402950308892,51.041157896379644],[-114.04194443293214,51.04122328349537],[-114.04119794256063,51.036274899551046],[-114.03680515732096,51.03620362085858],[-114.03678306341874,51.03456621220615],[-114.04279105525517,51.03463817661564],[-114.04119794256063,51.036274899551046]]),V=Y([[-114.03245254193595,51.0532361007371],[-114.05027216576363,51.05327391988086],[-114.05037125129785,51.050621738210474],[-114.05154533464692,51.04891295247008],[-114.05294643069912,51.04800145363462],[-114.0530456818646,51.04758695979581],J["8 Av S"]["4 St SE"],J["8 Av S"]["1 St SW"],J["12 Av S"]["1 St SW"],J["12 Av S"]["2 St SE"],J["17 Av S"]["2 St SE"],[-114.05891505161102,51.0350793399651],[-114.05947295099163,51.03361864160707],[-114.05956748319745,51.028709978619666],[-114.0593027589476,51.027660134295886],[-114.05892634373404,51.02510608380651],[-114.05932343005291,51.023279104890236],[-114.06782981960919,51.008736940208166],[-114.06791129417206,51.00860654344027],[-114.06779864140104,51.00859304219302],[-114.06771817513604,51.008680800229925],[-114.06776913710388,51.008873192268275]]),U=Y([J["26 Av S"]["14 St SW"],J["26 Av S"]["20 St SW"],J["34 Av S"]["20 St SW"],J["34 Av S"]["14 St SW"],J["26 Av S"]["14 St SW"],J["17 Av S"]["14 St SW"],J["17 Av S"]["1 St SW"],J["8 Av S"]["1 St SW"],J["8 Av S"]["8 St SW"],J["12 Av S"]["8 St SW"],J["12 Av S"]["14 St SW"],J["17 Av S"]["14 St SW"]]),X=1e-4,tt=Y([J["17 Av S"]["26 St SW"],J["17 Av S"]["29 St SW"],J["23 Av S"]["29 St SW"],J["23 Av S"]["26 St SW"],J["17 Av S"]["26 St SW"],J["17 Av S"]["14 St SW"],J["17 Av S"]["1 St SW"],J["8 Av S"]["1 St SW"],J["8 Av S"]["8 St SW"],J["12 Av S"]["8 St SW"],J["12 Av S"]["14 St SW"],J["17 Av S"]["14 St SW"]]),et=Y([J["16 Av N"]["10 St NW"],J["16 Av N"]["Edmonton Trail"],[-114.05624889447328,51.064177528209555],[-114.05617332900455,51.06366447705205],[-114.055130964576,51.060773093744004],[-114.05441634348082,51.059737261561885],[-114.0543247069982,51.05940321266864],[-114.0543155433623,51.057306712815574],[-114.05419641589222,51.057053283320336],[-114.05091582965353,51.05462259367253],[-114.0505461201982,51.054277121167935],[-114.05031132244514,51.05379827082477],[-114.05026958062238,51.053542444639504],[-114.05027216576363,51.05327391988086],[-114.05037125129785,51.050621738210474],[-114.05154533464692,51.04891295247008],[-114.05294643069912,51.04800145363462],[-114.0530456818646,51.04758695979581],J["8 Av S"]["4 St SE"],J["8 Av S"]["1 St SW"],J["8 Av S"]["4 St SW"],J["4 Av S"]["4 St SW"],J["4 Av S"]["9 St SW"],[-114.08577077297342,51.051922371373465],[-114.08593093455498,51.05254113041264],J["Kensington Rd"]["10 St NW"],J["5 Av N"]["10 St NW"],[-114.08600802217786,51.060942096287185],[-114.08531548906264,51.06224265404931],[-114.08458173372296,51.06297582091535],[-114.08442921154641,51.0635328127249],[-114.08489350460921,51.066904001348]]),nt=Y([J["20 Av N"]["7 St NW"],J["20 Av N"]["Center St"],J["8 Av S"]["Center St"],J["8 Av S"]["1 St SW"],J["12 Av S"]["1 St SW"],[-114.07156268197173,51.041667315481085],[-114.07151627155552,51.02970016087958],[-114.07314144774193,51.02963947142243],[-114.0755837013509,51.02889675928498],[-114.0781177043355,51.02739885277752],[-114.07846226790436,51.02707203118832],[-114.07883916075279,51.02612382969992],[-114.07791852502602,51.023378286034514],[-114.0778335229034,51.01850581066723]]),ot=Y([[-114.0625666284332,51.08051761717556],[-114.06249866849501,51.07331231657526],[-114.05634463964452,51.07333567547062],[-114.05610152100759,51.07065978671271],J["16 Av N"]["Edmonton Trail"],[-114.06257210372549,51.06691570029229],[-114.06249866849501,51.07331231657526],[-114.06257393380261,51.070609731750714],J["20 Av N"]["Center St"],J["8 Av S"]["Center St"],J["8 Av S"]["1 St SW"],J["12 Av S"]["1 St SW"],[-114.07156268197173,51.041667315481085],[-114.07151627155552,51.02970016087958],[-114.07314144774193,51.02963947142243],[-114.0755837013509,51.02889675928498],[-114.0781177043355,51.02739885277752],[-114.07846226790436,51.02707203118832],[-114.07883916075279,51.02612382969992],[-114.07791852502602,51.023378286034514],[-114.0778335229034,51.01850581066723]]),rt=Y([[-113.99880112307753,50.983248488266135],[-113.99880112307753,50.987371763615506],[-113.99888670668788,50.987545713885496],[-114.00005187171867,50.98878996323262],[-114.00159999561538,50.990490665877374],[-114.00166551550875,50.9906080452611],[-114.00172095541853,50.99114100737745],[-114.0017864753119,50.99130914296567],[-114.01110138901603,51.00105099313635],[-114.01172122501146,51.001818058317504],[-114.01230252185889,51.003199148246],[-114.01234337044255,51.00500831623873],[-114.01191629520771,51.006180298382226],[-114.01058666914153,51.0100959143063],[-114.01058666914994,51.010828735644054],[-114.0109922438028,51.011594259836336],[-114.01142901650589,51.01201954559441],[-114.01180339320818,51.01231397195058],[-114.01423684112537,51.01387112894279],[-114.01454882176026,51.01425713882235],[-114.01788701336052,51.01798622084238],[-114.01891949877961,51.01852163349035],[-114.01975743774038,51.018580202515885],[-114.02820685105861,51.01862211037978],[-114.02906393494493,51.01869751785368],[-114.02948348649765,51.019025538938045],[-114.03073148263177,51.02138176798409],[-114.03082952608338,51.02189981247443],[-114.03092064513434,51.028443729037924],[-114.03100045091638,51.02887663830172],[-114.03176858158336,51.0298177314818],[-114.0307610335851,51.03031964001304],[-114.02702472821282,51.03300216008723],[-114.02584759269875,51.03359186156952],[-114.02220645389316,51.033472667201714],[-114.02206782333698,51.03636936360178],[-114.03682431075224,51.04219493204588],[-114.0372805028625,51.0422846914819],[-114.04317766836698,51.04372702045797],J["9 Av S"]["6 St E"],J["8 Av S"]["6 St SE"],J["8 Av S"]["Center St"]]),it=Y([[-114.09721714004105,51.0705377462257],[-114.0849017998016,51.07053755601367],J["16 Av N"]["10 St NW"],[-114.0849017998016,51.07053755601367],[-114.09721714004105,51.0705377462257]]),st=Y([J["7 Av N"]["24 St NW"],[-114.11749161875599,51.05912442302438],[-114.10647790194818,51.059137846330714],[-114.10588883907864,51.05925817306614],[-114.10568580828625,51.059485094360774],[-114.10541778468061,51.059603569029434],[-114.10520277673322,51.05964614578945],[-114.09474606923256,51.05970225119184],J["8 Av N"]["14 St NW"],J["Kensington Rd"]["14 St NW"],J["Kensington Rd"]["10 St NW"],J["4 Av S"]["9 St SW"],J["8 Av S"]["9 St SW"],J["8 Av S"]["Center St"],J["8 Av S"]["9 St SW"],J["4 Av S"]["9 St SW"],J["Kensington Rd"]["10 St NW"],J["Kensington Rd"]["14 St NW"],J["Kensington Rd"]["24 St NW"],J["7 Av N"]["24 St NW"]]),at=Y([J["Kensington Rd"]["14 St NW"],J["Kensington Rd"]["10 St NW"],J["4 Av S"]["9 St SW"],J["8 Av S"]["9 St SW"],J["8 Av S"]["Center St"],J["8 Av S"]["9 St SW"],J["4 Av S"]["9 St SW"],J["Kensington Rd"]["10 St NW"],J["Kensington Rd"]["14 St NW"],[-114.11796612252739,51.052485028711544],[-114.12133858712923,51.05248009534121],[-114.12190382103606,51.05260445393406],[-114.12583617050362,51.05429131835533],[-114.12638789806529,51.05447084161884],[-114.13370519322709,51.05643249447681],[-114.13444515725314,51.056738485476366],[-114.14068499379347,51.05985019419703],[-114.14132759415365,51.060139844346935],[-114.14912764908298,51.06346210971278],[-114.15054294822237,51.06405123585141],[-114.15113894412244,51.065417418079356],[-114.15148177301391,51.06584750392453],[-114.1526520281249,51.06671232422135],[-114.16348115846756,51.074816814789145],[-114.16423454167781,51.07523967616143],[-114.16574130792006,51.075416393199546],[-114.16574130792006,51.07541323754493],[-114.16693165330277,51.07529963380956],[-114.16763262787953,51.075361873392566],[-114.16840107868614,51.07567743822706],[-114.17077740996558,51.07739588174196],[-114.17126962026164,51.07768303320474],[-114.1720129582852,51.07833621726261],[-114.17316207239337,51.07984729297398]]),ct=Y([J["17 Av S"]["1 St SW"],J["8 Av S"]["1 St SW"],J["8 Av S"]["8 St SW"],J["12 Av S"]["8 St SW"],J["12 Av S"]["14 St SW"],J["17 Av S"]["14 St SW"],J["17 Av S"]["2 St SE"],J["8 Av S"]["2 St SE"],J["8 Av S"]["1 St SW"]]),lt=Y([J["12 Av S"]["18 St SW"],J["12 Av S"]["2 St SE"],J["8 Av S"]["2 St SE"],J["8 Av S"]["Center St"]]);function St(t){return{...t,geometry:{...t.geometry,coordinates:t.geometry.coordinates.map((t=>[t[0]+X,t[1]+X]))}}}const ut=[{data:G,id:"hillhurst-inglewood-route",color:"#e7067d",name:"No. 1 Hillhurst - E Calgary"},{data:Q,id:"sunnyside-ramsay-route",color:"#fee300",name:"No. 8 Burns Avenue-Sunnyside"},{data:V,id:"riverside-manchester-route",color:"black",name:"No. 9 Manchester-Riverside"},{data:U,id:"southcalgary-route",color:"#f29517",name:"No. 7 South Calgary"},{data:St(tt),id:"killarney-route",color:"#2f71bc",name:"No. 6 Killarney"},{data:St(et),id:"crescent-height-route",color:"#00aaef",name:"No. 4 Crescent Heights"},{data:nt,id:"mount-pleasant-route",color:"#e82326",name:"No. 2 Mount Pleasant"},{data:St(ot),id:"tuxedo-park-route",color:"#4a4ca5",name:"No. 3 Tuxedo Park"},{data:St(rt),id:"ogden-route",color:"#835A39",name:"No. O Ogden - Downtown"},{data:it,id:"capitol-hill-route",color:"#b20168",name:"No. C Capitol Hill - Rosedale"},{data:St(st),id:"grand-trunk-route",color:"#74cabe",name:"No. A Grand Trunk"},{data:St(St(at)),id:"bowness-route",color:"#b6449f",name:"No. B Bowness"},{data:St(St(ct)),id:"beltline-route",color:"#3aba72",name:"No. 5 Beltline"},{data:lt,id:"sunalta-route",color:"#d7e34d",name:"No. S Sunalta"}].sort((function(t,e){return t.name<e.name?-1:1}));function dt(e){let n,o,r,i,d,p=e[0].name+"";return{c(){n=l("div"),o=l("div"),i=u(),d=S(p),f(o,"class","line svelte-1lpktp8"),f(o,"style",r=`background-color: ${e[0].color}`),f(n,"class","flex row svelte-1lpktp8")},m(t,e){a(t,n,e),s(n,o),s(n,i),s(n,d)},p(t,[e]){1&e&&r!==(r=`background-color: ${t[0].color}`)&&f(o,"style",r),1&e&&p!==(p=t[0].name+"")&&function(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}(d,p)},i:t,o:t,d(t){t&&c(n)}}}function ft(t,e,n){let{route:o}=e;return t.$$set=t=>{"route"in t&&n(0,o=t.route)},[o]}class pt extends H{constructor(t){super(),F(this,t,ft,dt,i,{route:0})}}function mt(t){let e,n,o,i,S,p,m,v;return o=new pt({props:{route:t[1]}}),{c(){e=l("div"),n=l("div"),P(o.$$.fragment),i=u(),S=l("button"),S.textContent="Stop Tracking",f(n,"class","flex header"),f(S,"class","svelte-706qqo"),f(e,"class","panel-container")},m(c,l){a(c,e,l),s(e,n),z(o,n,null),s(e,i),s(e,S),p=!0,m||(v=d(S,"click",(function(){r(t[0])&&t[0].apply(this,arguments)})),m=!0)},p(e,[n]){t=e},i(t){p||(K(o.$$.fragment,t),p=!0)},o(t){M(o.$$.fragment,t),p=!1},d(t){t&&c(e),j(o),m=!1,v()}}}function vt(t,e,n){let{selectedId:o}=e,{stopTracking:r}=e;const i=ut.find((({id:t})=>t===o));return t.$$set=t=>{"selectedId"in t&&n(2,o=t.selectedId),"stopTracking"in t&&n(0,r=t.stopTracking)},[r,i,o]}class gt extends H{constructor(t){super(),F(this,t,vt,mt,i,{selectedId:2,stopTracking:0})}}function ht(e){let n;return{c(){n=l("div"),n.innerHTML='<b>Calgary&#39;s Streetcars</b> \n    <p>Prior to WWII, streetcar networks were very common throughout North America.\n      These networks had frequent service, were well connected,\n      and enabled people to live beyond walking distance from their employment. These networks enabled the first boom of\n      suburbanization, well before the widespread use of private automobiles.</p> \n    <p>Access to these networks was an important contributor to land value. Developers would often petition city governments to construct\n      these lines to support new neighbourhoods. In Calgary, the Municipal Railway operated a network connecting residents to commercial districts in the city center,\n      industrial sectors in Inglewood, Riverside, Manchester, and the CPR rail yards at the sourthern edge of the city. One line of the\n      network went to the natural parks at Bowness.</p> \n    <p>In the 1940s and 1950s, these networks were frequently dismantled in favour of bus service, and more importantly, the use of private\n      automobiles. Calgary&#39;s system was retired in 1950. Traces of the network, such as the 5th Street loop in Sunnyside, can still be seen to this day.\n      Explore the map to learn more about this network. Click on a car to track its route.</p> \n    <p>This visualization was inspired by <a href="https://saadiqm.com/2019/04/13/calgary-historic-streetcar-map.html">Saadiq Mohiuddin&#39;s blog post of the Municipal Railway</a>.</p>',f(n,"class","panel-container root svelte-1s3mh19")},m(t,e){a(t,n,e)},p:t,i:t,o:t,d(t){t&&c(n)}}}class $t extends H{constructor(t){super(),F(this,t,null,ht,i,{})}}function At(t,e,n){const o=t.slice();return o[0]=e[n],o}function Wt(e){let n,o;return n=new pt({props:{route:e[0]}}),{c(){P(n.$$.fragment)},m(t,e){z(n,t,e),o=!0},p:t,i(t){o||(K(n.$$.fragment,t),o=!0)},o(t){M(n.$$.fragment,t),o=!1},d(t){j(n,t)}}}function yt(t){let e,n,o,r,i,S=ut,d=[];for(let e=0;e<S.length;e+=1)d[e]=Wt(At(t,S,e));const p=t=>M(d[t],1,1,(()=>{d[t]=null}));return{c(){e=l("div"),n=l("b"),n.textContent="Legend",o=u(),r=l("div");for(let t=0;t<d.length;t+=1)d[t].c();f(r,"class","content svelte-2d210l"),f(e,"class","panel-container")},m(t,c){a(t,e,c),s(e,n),s(e,o),s(e,r);for(let t=0;t<d.length;t+=1)d[t].m(r,null);i=!0},p(t,[e]){if(0&e){let n;for(S=ut,n=0;n<S.length;n+=1){const o=At(t,S,n);d[n]?(d[n].p(o,e),K(d[n],1)):(d[n]=Wt(o),d[n].c(),K(d[n],1),d[n].m(r,null))}for(R(),n=S.length;n<d.length;n+=1)p(n);I()}},i(t){if(!i){for(let t=0;t<S.length;t+=1)K(d[t]);i=!0}},o(t){d=d.filter(Boolean);for(let t=0;t<d.length;t+=1)M(d[t]);i=!1},d(t){t&&c(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(d,t)}}}class Nt extends H{constructor(t){super(),F(this,t,null,yt,i,{})}}function bt(e){let n,o,r;return{c(){n=l("div"),f(n,"class","transition hidden svelte-9ri5fp"),f(n,"title","Expand/Collapse")},m(t,i){a(t,n,i),o||(r=d(n,"click",e[0]),o=!0)},p:t,i:t,o:t,d(t){t&&c(n),o=!1,r()}}}function wt(){const t=document.querySelector(".transition");t.classList.contains("hidden")?t.classList.remove("hidden"):t.classList.add("hidden")}function kt(t,e,n){let{onToggle:o}=e;return h((()=>wt())),t.$$set=t=>{"onToggle"in t&&n(1,o=t.onToggle)},[function(){o(),wt()},o]}class xt extends H{constructor(t){super(),F(this,t,kt,bt,i,{onToggle:1})}}function Et(e){let n,o;return n=new $t({}),{c(){P(n.$$.fragment)},m(t,e){z(n,t,e),o=!0},p:t,i(t){o||(K(n.$$.fragment,t),o=!0)},o(t){M(n.$$.fragment,t),o=!1},d(t){j(n,t)}}}function Ct(t){let e,n;return e=new gt({props:{selectedId:t[0],stopTracking:t[3]}}),{c(){P(e.$$.fragment)},m(t,o){z(e,t,o),n=!0},p(t,n){const o={};1&n&&(o.selectedId=t[0]),e.$set(o)},i(t){n||(K(e.$$.fragment,t),n=!0)},o(t){M(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function Lt(t){let e,n;return e=new Nt({}),{c(){P(e.$$.fragment)},m(t,o){z(e,t,o),n=!0},i(t){n||(K(e.$$.fragment,t),n=!0)},o(t){M(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function Tt(t){let e,n,o,r,i,S,d,p,m,v,g;function h(e){t[6](e)}function $(e){t[7](e)}n=new xt({props:{onToggle:_t}});let W={};void 0!==t[2]&&(W.showLegend=t[2]),void 0!==t[1]&&(W.speed=t[1]),r=new Z({props:W}),A.push((()=>q(r,"showLegend",h))),A.push((()=>q(r,"speed",$)));const y=[Ct,Et],N=[];function b(t,e){return t[0]?0:1}p=b(t),m=N[p]=y[p](t);let w=t[2]&&Lt();return{c(){e=l("div"),P(n.$$.fragment),o=u(),P(r.$$.fragment),d=u(),m.c(),v=u(),w&&w.c(),f(e,"class","root hidden svelte-13i2u1s")},m(t,i){a(t,e,i),z(n,e,null),s(e,o),z(r,e,null),s(e,d),N[p].m(e,null),s(e,v),w&&w.m(e,null),g=!0},p(t,[n]){const o={};!i&&4&n&&(i=!0,o.showLegend=t[2],k((()=>i=!1))),!S&&2&n&&(S=!0,o.speed=t[1],k((()=>S=!1))),r.$set(o);let s=p;p=b(t),p===s?N[p].p(t,n):(R(),M(N[s],1,1,(()=>{N[s]=null})),I(),m=N[p],m?m.p(t,n):(m=N[p]=y[p](t),m.c()),K(m,1),m.m(e,v)),t[2]?w?4&n&&K(w,1):(w=Lt(),w.c(),K(w,1),w.m(e,null)):w&&(R(),M(w,1,1,(()=>{w=null})),I())},i(t){g||(K(n.$$.fragment,t),K(r.$$.fragment,t),K(m),K(w),g=!0)},o(t){M(n.$$.fragment,t),M(r.$$.fragment,t),M(m),M(w),g=!1},d(t){t&&c(e),j(n),j(r),N[p].d(),w&&w.d()}}}function _t(){const t=document.querySelector(".root");t.classList.contains("hidden")?t.classList.remove("hidden"):t.classList.add("hidden")}function Rt(t,e,n){let o,r,i,s=2e-6,a=!0;const c=[-114.06,51.05];mapboxgl.accessToken="pk.eyJ1IjoiZHlsYW5ncmFuZG1vbnQiLCJhIjoiY2t0eDV1cmdkMnBxbzJ3bzI5dm1wbHZ4MCJ9.19ogLLAZwVYbKNoy-E_S5Q";const l=new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:c,zoom:13,logoPosition:"top-left"}),S={type:"FeatureCollection",features:ut.map((({data:t})=>({type:"Feature",geometry:{type:"Point",coordinates:t.geometry.coordinates[0]}})))}.features.map((({geometry:t},e)=>{const{id:r,color:i}=ut[e],s=document.createElement("div");return s.className="marker",s.style.color=i,s.id=`marker-${r}`,s.addEventListener("click",(function(t){t.stopPropagation(),n(0,o=o===r?"":r)})),new mapboxgl.Marker(s).setLngLat(t.coordinates).addTo(l)}));return ut.forEach((({data:t},e)=>{!function(t,e,n){let o=0,i=t[o];requestAnimationFrame((function a(){const c=t[(o+1)%t.length],S=t[o%t.length],u=Math.sqrt((c[0]-S[0])**2+(c[1]-S[1])**2),d=1*s;if(d>Math.sqrt((c[0]-i[0])**2+(c[1]-i[1])**2))i=c,o++;else{const t=d/u*(c[0]-S[0])+i[0],e=d/u*(c[1]-S[1])+i[1];i=[t,e]}r===n&&l.setCenter(i),e.setLngLat(i),requestAnimationFrame(a)}))}(t.geometry.coordinates,S[e],e)})),l.on("load",(()=>{ut.forEach((({data:t,id:e,color:n})=>{!function(t,e,n){l.addSource(t,{type:"geojson",data:e}),l.addLayer({id:t,type:"line",source:t,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":n,"line-width":8}})}(e,t,n)}))})),ut.forEach((({id:t})=>{l.on("click",t,(t=>{const e=t.features[0]?.layer.id;n(0,o=o===e?"":e)}))})),h((()=>_t())),t.$$.update=()=>{1&t.$$.dirty&&n(4,r=ut.findIndex((({id:t})=>t===o))),16&t.$$.dirty&&n(5,i=r>-1),32&t.$$.dirty&&(i?(l.setPitch(45),l.setZoom(18)):l.flyTo({pitch:0,center:c,zoom:13}))},[o,s,a,function(){n(0,o="")},r,i,function(t){a=t,n(2,a)},function(t){s=t,n(1,s)}]}return new class extends H{constructor(t){super(),F(this,t,Rt,Tt,i,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
